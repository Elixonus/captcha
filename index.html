<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div style="background-color: darkorange; border-radius: 10px">
        <h1>Count the hugging faces!</h1>
        <img src="hugging_face.png" style="height: 100px;">
    </div>
    <br>
    <img id="image">
    <br>
    <input type="number" id="input" style="font-size: 50px;">
    <input type="button" value="Check" onclick="checkNumber();" style="font-size: 50px;">

    <style>

        #image
        {
            width: 50%;
        }

        body
        {
            color: black;
            background-color: yellow;
        }

    </style>

    <script>

        var code = ""
        var image = document.getElementById("image")
        var input = document.getElementById("input")
        getImage();

        function getImage()
        {
            var xhttp = new XMLHttpRequest()
            xhttp.onreadystatechange = function()
            {
                if(this.readyState == 4 && this.status == 200)
                {
                    code = this.responseText
                    image.src = "api/image/" + this.responseText
                }
            }
            xhttp.open("GET", "api/new");
            xhttp.send();
        }

        function checkNumber()
        {
            var xhttp = new XMLHttpRequest()
            xhttp.onreadystatechange = function()
            {
                if(this.readyState == 4 && this.status == 200)
                {
                    if(this.responseText != "Good")
                    {
                        getImage();
                    }

                    else
                    {
                        window.location = "./success";
                    }
                }
            }
            xhttp.open("GET", "api/check/" + code + "?number=" + input.value);
            xhttp.send();
        }


    </script>
</body>
</html>